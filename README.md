**Replication materials for:**

### [Lessons from near real-time forecasting of irregular leadership changes](link)

*Journal of Peace Research, 2017*

For questions contact the corresponding author [Michael Ward](mailto:michael.don.ward@gmail.com), or [Andreas Beger](adbeger@gmail.com).

## Citation:

Ward, Michael D. and Andreas Beger, 2017 (forthcoming), "Lessons from near real-time forecasting of irregular leadership changes", *Journal of Peace Research*. 

```bibtex
@article{ward2017lessons,
  title={Lessons from near real-time forecasting of irregular leadership changes},
  author={Ward, Michael D. and Andreas Beger},
  journal={Journal of Peace Research},
  year={forthcoming},
  volume={},
  issue={},
  pages={}
}    
```

## Getting the code and data

The easiest way to get the replication code is to [download a zip](https://github.com/andybega/rap-ensemble-forecasting/archive/master.zip). Alternatively, you can clone the repository through the Github GUI client ([OS X](https://mac.github.com/), [Windows](https://windows.github.com/)).


## Running the replication

1. [Download](https://github.com/andybega/jpr-forecasting-lessons/archive/master.zip) or [clone](github-mac://openRepo/https://github.com/andybega/jpr-forecasting-lessons) this repository. 

2. In `replicate.R`, change the working directory path on line 9.

3. Setup R library dependencies. We use `packrat` for this, which will create a private R library containing the specific versions of the various R packages that we used during our latest replication. To setup the libraries, follow the steps that are also included in the replication script, i.e.:

    ```r
    library("packrat")
    
    packrat::restore()
    packrat::status()
    ```

4. Run through the remaining scripts sourced in the replication script. *If you don't want to re-estimate all the models*, we have saved all the intermediary files generated by the `R/estimate-and-forecast.R` script in `tests/data`. In that case, copy over all files in `test/data` to `data`. E.g. on OS X in terminal: 

    ```shell
    cp tests/data/*.rda data/
    ```

5. We have included copies of the output in `tests`. The output in `data`, `figures`, and `tables` that is generated by the replication script should match these results. 

The code was developed over several versions of R. The latest we ran and checked results against was R 3.3.0 on OS X.


## File notes

- `R`: contains the main working scripts. Called from `replicate.R` as needed. 
    - `utilities`: various minor functions used by the other scripts.
- `data`: contains the source data from 2015-08, and will also later contain estimated models and other intermediate files generated by `R/estimate-and-forecast.R` that are used by other scripts. 
    - `W.gower.fix.rda`: this is only needed for the Appendix. The 2015-08 version of the data inadvertently missed one of the Polity-based Gower spatial lags for the 1990's, which is something we fixed in a later version of the data. This is drop-in data that is needed to fix this for the Appendix lasso/random forest comparison; but it is not needed for the original forecasts. 
- `packrat`: R's `virtualenv` equivalent
- `tests`: contains copies of output--intermediate files like estimated models, figures, and tables--against which to check results. 




