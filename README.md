**Replication materials for:**

### [Lessons from near real-time forecasting of irregular leadership changes](link)

For questions contact the corresponding author [Michael Ward](mailto:michael.don.ward@gmail.com) or [Andreas Beger](adbeger@gmail.com).

**Citation:**

Ward, Michael D. and Andreas Beger, 2017, "Lessons from near real-time forecasting of irregular leadership changes", *Journal of Peace Research* forthcoming. 

```bibtex
@article{ward2017lessons,
  title={Lessons from near real-time forecasting of irregular leadership changes},
  author={Ward, Michael D. and Andreas Beger},
  journal={Journal of Peace Research},
  year={2017},
  volume={},
  issue={},
  pages={}
}    
```

Getting the code and data
-----

The easiest way to get the replication code is to [download a zip](https://github.com/andybega/rap-ensemble-forecasting/archive/master.zip). Alternatively, you can clone the repository through the Github GUI client ([OS X](https://mac.github.com/), [Windows](https://windows.github.com/)).


Running the replication
-----

1. [Download](https://github.com/andybega/rap-ensemble-forecasting/archive/master.zip) or [clone](github-mac://openRepo/https://github.com/andybega/rap-ensemble-forecasting) this repository. 

2. In `replication.R`, change the working directory path on line XX

3. Setup all R library dependencies. We use `packrat` for this, which will create a private R library containing the specific versions of the various R packages that we used during our latest replication. To setup the libraries, follow the steps that are also included in the replication script, i.e.:

    ```r
    library("packrat")
    
    packrat::status()
    packrat::restore()
    ```

4. Run through the remaining scripts sourced in the replication script. *If you don't want to re-estimate all the models*, we have saved all the intermediary files generated by the `R/estimate-and-forecast.R` script in `tests/data`. In that case, copy over all files in `test/data` to `data`. 

5. To recreate Figures 2 and 4, in Terminal on OS X:

    ```shell
    cd path/to/jpr-forecasting-lessons
    make
    ```

The code was developed over several versions of R. The latest we ran and checked results against was R 3.3.0 on OS X.


File notes
-----------

- `data`: contains the source data from 2015-08, and will also later contain estimated models and other intermediate files generated by `R/estimate-and-forecast.R` that are used by other scripts. 
- `fix-W-gower`: this is only needed for the Appendix. The 2015-08 version of the data inadvertently missed one of the Polity-based Gower spatial lags for the 1990's, which is something we fixed in a later version of the data. This script creates drop-in data that is needed to fix this for the Appendix lasso/random forest comparison; but it is not needed for the original forecasts. 
- `packrat`: R's `virtualenv` equivalent
- `tex`: source .tex code for Figures 2 and 4; see the makefile for creating the associated .jpeg figures. 
- `tests`: contains copies of output--intermediate files like estimated models, figures, and tables--against which to check results. 




